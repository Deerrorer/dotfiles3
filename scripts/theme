#!/usr/bin/env bash

# rofi theme
DIR_THEME="$HOME/.config/rofi/compact_without_icons.rasi"

DIR="/usr/local/bin/themes"

get_options_theme() {
  echo "blue"
  echo "dark"
}

get_options_theme_polybar() {
  echo "polybar-square"
  echo "polybar-rounded"
}

main() {

  # Get THEME from rofi
  THEME=$( (get_options_theme) | rofi -dmenu -i -fuzzy -p "" -theme "$DIR_THEME")

  # If user has not picked anything, exit
  if [[ -z "${THEME// /}" ]]; then
    exit 1
  fi

  cp -f $DIR/$THEME/kitty/kitty.conf ~/.config/kitty/
  cp -f $DIR/$THEME/rofi/* ~/.config/rofi/
  cp -f $DIR/$THEME/vsc/* ~/.config/Code\ -\ OSS/User
  cp -f $DIR/$THEME/vsc/* ~/.config/Code/User
  cp -f $DIR/$THEME/polybar/* ~/.config/polybar
  cp -f $DIR/$THEME/i3/* ~/.config/i3
  cp -f $DIR/$THEME/dunst/* ~/.config/dunst
  THEME_POLYBAR=$( (get_options_theme_polybar) | rofi -dmenu -i -fuzzy -p "" -theme "$DIR_THEME")

    # If user has not picked anything, exit
  if [[ -z "${THEME_POLYBAR// /}" ]]; then
    exit 1
  fi
  cp -f $DIR/$THEME_POLYBAR/launch.sh ~/.config/polybar

  # done
  set -e

  i3-msg restart
}

main &

exit 0
